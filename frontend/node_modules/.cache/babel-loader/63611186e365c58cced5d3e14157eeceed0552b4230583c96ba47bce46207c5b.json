{"ast":null,"code":"// src/pages/HomePage.jsx\nimport React,{useEffect,useState}from'react';import{fetchTasks,createTask,updateTask,deleteTask}from'../api/taskApi';import TaskForm from'../components/TaskForm';import TaskList from'../components/TaskList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const[tasks,setTasks]=useState([]);const fetchAllTasks=async()=>{const token=localStorage.getItem('token');if(!token)return;try{const data=await fetchTasks(token);setTasks(data);}catch(error){console.error('Erreur lors du chargement des tâches:',error);}};useEffect(()=>{fetchAllTasks();},[]);const handleTaskCreated=async task=>{const token=localStorage.getItem('token');const newTask=await createTask(task,token);setTasks(prevTasks=>[...prevTasks,newTask]);};const handleUpdateTask=async task=>{const token=localStorage.getItem('token');const updatedTask=await updateTask(task._id,task,token);setTasks(prevTasks=>prevTasks.map(t=>t._id===updatedTask._id?updatedTask:t));};const handleDeleteTask=async taskId=>{const token=localStorage.getItem('token');await deleteTask(taskId,token);setTasks(prevTasks=>prevTasks.filter(t=>t._id!==taskId));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mes t\\xE2ches\"}),/*#__PURE__*/_jsx(TaskForm,{onTaskCreated:handleTaskCreated}),/*#__PURE__*/_jsx(TaskList,{tasks:tasks,onUpdateTask:handleUpdateTask,onDeleteTask:handleDeleteTask})]});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","fetchTasks","createTask","updateTask","deleteTask","TaskForm","TaskList","jsx","_jsx","jsxs","_jsxs","HomePage","tasks","setTasks","fetchAllTasks","token","localStorage","getItem","data","error","console","handleTaskCreated","task","newTask","prevTasks","handleUpdateTask","updatedTask","_id","map","t","handleDeleteTask","taskId","filter","children","onTaskCreated","onUpdateTask","onDeleteTask"],"sources":["C:/Users/Mohamed Toumi/Documents/Task-Management-Application/Task-Management-Application-/frontend/src/pages/HomePage.jsx"],"sourcesContent":["\r\n\r\n// src/pages/HomePage.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { fetchTasks, createTask, updateTask, deleteTask } from '../api/taskApi';\r\nimport TaskForm from '../components/TaskForm';\r\nimport TaskList from '../components/TaskList';\r\n\r\nconst HomePage = () => {\r\n  const [tasks, setTasks] = useState([]);\r\n\r\n  const fetchAllTasks = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n    try {\r\n      const data = await fetchTasks(token);\r\n      setTasks(data);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des tâches:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAllTasks();\r\n  }, []);\r\n\r\n  const handleTaskCreated = async (task) => {\r\n    const token = localStorage.getItem('token');\r\n    const newTask = await createTask(task, token);\r\n    setTasks((prevTasks) => [...prevTasks, newTask]);\r\n  };\r\n\r\n  const handleUpdateTask = async (task) => {\r\n    const token = localStorage.getItem('token');\r\n    const updatedTask = await updateTask(task._id, task, token);\r\n    setTasks((prevTasks) =>\r\n      prevTasks.map((t) => (t._id === updatedTask._id ? updatedTask : t))\r\n    );\r\n  };\r\n\r\n  const handleDeleteTask = async (taskId) => {\r\n    const token = localStorage.getItem('token');\r\n    await deleteTask(taskId, token);\r\n    setTasks((prevTasks) => prevTasks.filter((t) => t._id !== taskId));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Mes tâches</h1>\r\n      <TaskForm onTaskCreated={handleTaskCreated} />\r\n      <TaskList\r\n        tasks={tasks}\r\n        onUpdateTask={handleUpdateTask}\r\n        onDeleteTask={handleDeleteTask}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"AAEA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,UAAU,CAAEC,UAAU,CAAEC,UAAU,CAAEC,UAAU,KAAQ,gBAAgB,CAC/E,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAc,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,OACZ,GAAI,CACF,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAjB,UAAU,CAACc,KAAK,CAAC,CACpCF,QAAQ,CAACK,IAAI,CAAC,CAChB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uCAAuC,CAAEA,KAAK,CAAC,CAC/D,CACF,CAAC,CAEDpB,SAAS,CAAC,IAAM,CACde,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAO,iBAAiB,CAAG,KAAO,CAAAC,IAAI,EAAK,CACxC,KAAM,CAAAP,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAM,OAAO,CAAG,KAAM,CAAArB,UAAU,CAACoB,IAAI,CAAEP,KAAK,CAAC,CAC7CF,QAAQ,CAAEW,SAAS,EAAK,CAAC,GAAGA,SAAS,CAAED,OAAO,CAAC,CAAC,CAClD,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAG,KAAO,CAAAH,IAAI,EAAK,CACvC,KAAM,CAAAP,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAS,WAAW,CAAG,KAAM,CAAAvB,UAAU,CAACmB,IAAI,CAACK,GAAG,CAAEL,IAAI,CAAEP,KAAK,CAAC,CAC3DF,QAAQ,CAAEW,SAAS,EACjBA,SAAS,CAACI,GAAG,CAAEC,CAAC,EAAMA,CAAC,CAACF,GAAG,GAAKD,WAAW,CAACC,GAAG,CAAGD,WAAW,CAAGG,CAAE,CACpE,CAAC,CACH,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAG,KAAO,CAAAC,MAAM,EAAK,CACzC,KAAM,CAAAhB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAb,UAAU,CAAC2B,MAAM,CAAEhB,KAAK,CAAC,CAC/BF,QAAQ,CAAEW,SAAS,EAAKA,SAAS,CAACQ,MAAM,CAAEH,CAAC,EAAKA,CAAC,CAACF,GAAG,GAAKI,MAAM,CAAC,CAAC,CACpE,CAAC,CAED,mBACErB,KAAA,QAAAuB,QAAA,eACEzB,IAAA,OAAAyB,QAAA,CAAI,eAAU,CAAI,CAAC,cACnBzB,IAAA,CAACH,QAAQ,EAAC6B,aAAa,CAAEb,iBAAkB,CAAE,CAAC,cAC9Cb,IAAA,CAACF,QAAQ,EACPM,KAAK,CAAEA,KAAM,CACbuB,YAAY,CAAEV,gBAAiB,CAC/BW,YAAY,CAAEN,gBAAiB,CAChC,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}